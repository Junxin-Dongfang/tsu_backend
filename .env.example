# =============================================================================
# TSU Server Environment Variables Template
# 使用说明：复制此文件为 .env，并填写实际的配置值
# 命令：cp .env.example .env
# =============================================================================

# --------------------------------------------------------------------------------
# 数据库配置 - PostgreSQL (主业务数据库)
# --------------------------------------------------------------------------------

# 数据库超级用户（用于执行迁移）
POSTGRES_USER=tsu_user
POSTGRES_PASSWORD=tsu_test
POSTGRES_DB=tsu_db
POSTGRES_HOST=tsu_postgres
POSTGRES_PORT=5432

# 迁移数据库连接字符串（使用超级用户）
MIGRATION_DATABASE_URL=postgres://tsu_user:tsu_test@tsu_postgres:5432/tsu_db?sslmode=disable

# Auth 模块数据库连接字符串
# 注意 search_path: auth schema 优先，然后是 public（枚举类型）
TSU_AUTH_DATABASE_URL=postgres://tsu_auth_user:tsu_auth_password@tsu_postgres:5432/tsu_db?sslmode=disable&search_path=auth,public

# Admin 模块数据库连接字符串
# 注意 search_path: admin 和 game_config 都可写，public 只读
TSU_ADMIN_DATABASE_URL=postgres://tsu_admin_user:tsu_admin_password@tsu_postgres:5432/tsu_db?sslmode=disable&search_path=admin,game_config,public

# Game 模块数据库连接字符串
# 注意 search_path: game_runtime 可写，game_config 只读，auth 只读
TSU_GAME_DATABASE_URL=postgres://tsu_game_user:tsu_game_password@tsu_postgres:5432/tsu_db?sslmode=disable&search_path=game_runtime,game_config,auth,public

# --------------------------------------------------------------------------------
# 数据库配置 - PostgreSQL (Ory 服务专用数据库)
# --------------------------------------------------------------------------------

ORY_POSTGRES_USER=ory_user
ORY_POSTGRES_PASSWORD=ory_test
ORY_POSTGRES_DB=ory_db
ORY_POSTGRES_HOST=tsu_ory_postgres
ORY_POSTGRES_PORT=5432

# --------------------------------------------------------------------------------
# Redis 配置
# --------------------------------------------------------------------------------

REDIS_HOST=tsu_redis
REDIS_PORT=6379
REDIS_PASSWORD=tsu_redis_password
REDIS_DB=0

# --------------------------------------------------------------------------------
# NATS 配置
# --------------------------------------------------------------------------------

NATS_ADDRESS=nats:4222
NATS_CLUSTER_ID=tsu_cluster

# --------------------------------------------------------------------------------
# Consul 配置
# --------------------------------------------------------------------------------

CONSUL_ADDRESS=consul:8500

# --------------------------------------------------------------------------------
# Ory Kratos 配置
# --------------------------------------------------------------------------------

KRATOS_PUBLIC_URL=http://tsu_kratos_service:4433
KRATOS_ADMIN_URL=http://tsu_kratos_service:4434

# --------------------------------------------------------------------------------
# Ory Keto 配置 (gRPC)
# --------------------------------------------------------------------------------

# Keto Read gRPC 地址
KETO_READ_URL=tsu_keto_service:4466
# Keto Write gRPC 地址
KETO_WRITE_URL=tsu_keto_service:4467

# --------------------------------------------------------------------------------
# 应用配置
# --------------------------------------------------------------------------------

# 环境：development, staging, production
ENVIRONMENT=development

# JWT 配置（用于内部服务认证）
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_TOKEN_TTL_MINUTES=30

# Admin 服务
ADMIN_HTTP_PORT=8071

# Auth 服务
AUTH_HTTP_PORT=8072

# Game 服务
GAME_HTTP_PORT=8083

# --------------------------------------------------------------------------------
# 日志配置
# --------------------------------------------------------------------------------

LOG_LEVEL=debug
LOG_FORMAT=json
