# ==========================================
# TSU 项目生产环境配置文件
# ==========================================
# 说明：
#   1. 部署脚本会自动生成 .env.prod 文件
#   2. 如果手动创建，请复制此文件并填写实际值
#   3. .env.prod 已加入 .gitignore，不会被提交到 Git
#
# 使用方法：
#   cp .env.prod.example .env.prod
#   vim .env.prod  # 填写实际配置

# ==========================================
# 基础配置
# ==========================================
ENV=prod
SERVER_IP=47.239.139.109

# ==========================================
# 主数据库配置 (tsu_db)
# ==========================================
DB_HOST=tsu_postgres_main
DB_PORT=5432
DB_USER=tsu_user
DB_PASSWORD=CHANGE_ME_RANDOM_PASSWORD_32_CHARS
DB_NAME=tsu_db

# ==========================================
# Ory 数据库配置 (ory_db)
# ==========================================
ORY_DB_HOST=tsu_postgres_ory
ORY_DB_PORT=5432
ORY_DB_USER=ory_user
ORY_DB_PASSWORD=CHANGE_ME_RANDOM_PASSWORD_32_CHARS
ORY_DB_NAME=ory_db

# ==========================================
# Redis 配置
# ==========================================
REDIS_HOST=tsu_redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_RANDOM_PASSWORD_32_CHARS

# ==========================================
# 服务发现与消息队列
# ==========================================
CONSUL_ADDRESS=tsu_consul:8500
NATS_ADDRESS=tsu_nats:4222

# ==========================================
# JWT 密钥
# ==========================================
JWT_SECRET=CHANGE_ME_RANDOM_SECRET_64_CHARS

# ==========================================
# Kratos 密钥配置
# ==========================================
KRATOS_COOKIE_SECRET=CHANGE_ME_RANDOM_SECRET_32_CHARS_FOR_COOKIE
KRATOS_CIPHER_SECRET=CHANGE_ME_RANDOM_SECRET_32_CHARS_FOR_CIPHER

# ==========================================
# 数据库连接字符串（自动生成，供应用使用）
# ==========================================
# 主服务数据库连接
TSU_ADMIN_DATABASE_URL=postgres://\${DB_USER}:\${DB_PASSWORD}@\${DB_HOST}:\${DB_PORT}/\${DB_NAME}?sslmode=disable&search_path=admin,game_config,public
TSU_AUTH_DATABASE_URL=postgres://\${DB_USER}:\${DB_PASSWORD}@\${DB_HOST}:\${DB_PORT}/\${DB_NAME}?sslmode=disable&search_path=auth,public

# Ory 数据库连接（供 Kratos 和 Keto 使用）
KRATOS_DSN=postgres://\${ORY_DB_USER}:\${ORY_DB_PASSWORD}@\${ORY_DB_HOST}:\${ORY_DB_PORT}/\${ORY_DB_NAME}?sslmode=disable&search_path=kratos
KETO_DSN=postgres://\${ORY_DB_USER}:\${ORY_DB_PASSWORD}@\${ORY_DB_HOST}:\${ORY_DB_PORT}/\${ORY_DB_NAME}?sslmode=disable&search_path=keto
