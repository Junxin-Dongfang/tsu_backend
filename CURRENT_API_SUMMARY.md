# Game Module å½“å‰æ¥å£æ€»è§ˆ

> æœ¬æ–‡æ¡£ä»…æ€»ç»“å½“å‰å·²å®ç°çš„æ¥å£å’Œæ”¯æŒçš„æ¸¸æˆæµç¨‹

---

## ğŸ“Š æ¥å£ç»Ÿè®¡

**æ€»è®¡**ï¼š40ä¸ªæ¥å£  
**è®¤è¯è¦æ±‚**ï¼š
- ğŸ”“ å…¬å¼€æ¥å£ï¼š16ä¸ª
- ğŸ”’ éœ€è®¤è¯æ¥å£ï¼š24ä¸ª

---

## 1ï¸âƒ£ è®¤è¯ç³»ç»Ÿï¼ˆ6ä¸ªæ¥å£ï¼‰

### ç”¨æˆ·è®¤è¯
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ |
|---|---|---|---|
| ç”¨æˆ·æ³¨å†Œ | POST | `/api/v1/game/auth/register` | ğŸ”“ å…¬å¼€ |
| ç”¨æˆ·ç™»å½• | POST | `/api/v1/game/auth/login` | ğŸ”“ å…¬å¼€ |
| ç”¨æˆ·ç™»å‡º | POST | `/api/v1/game/auth/logout` | ğŸ”“ å…¬å¼€ |
| è·å–ç”¨æˆ·ä¿¡æ¯ | GET | `/api/v1/game/auth/users/:user_id` | ğŸ”“ å…¬å¼€ |

### å¯†ç æ¢å¤
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ |
|---|---|---|---|
| å‘èµ·å¯†ç æ¢å¤ | POST | `/api/v1/game/auth/recovery/initiate` | ğŸ”“ å…¬å¼€ |
| éªŒè¯ç é‡ç½®å¯†ç  | POST | `/api/v1/game/auth/password/reset-with-code` | ğŸ”“ å…¬å¼€ |

**åŠŸèƒ½è¯´æ˜**ï¼š
- æ”¯æŒé‚®ç®±éªŒè¯ç æ³¨å†Œ
- æ”¯æŒç”¨æˆ·å/é‚®ç®±ç™»å½•
- æ”¯æŒå¯†ç æ‰¾å›ï¼ˆé‚®ç®±éªŒè¯ç ï¼‰

---

## 2ï¸âƒ£ è‹±é›„ç®¡ç†ï¼ˆ8ä¸ªæ¥å£ï¼‰

### åŸºç¡€ç®¡ç†
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| åˆ›å»ºè‹±é›„ | POST | `/api/v1/game/heroes` | ğŸ”’ éœ€è¦ | é€‰æ‹©èŒä¸šåˆ›å»ºè§’è‰² |
| è·å–è‹±é›„åˆ—è¡¨ | GET | `/api/v1/game/heroes` | ğŸ”’ éœ€è¦ | è·å–å½“å‰ç”¨æˆ·æ‰€æœ‰è‹±é›„ |
| è·å–è‹±é›„è¯¦æƒ… | GET | `/api/v1/game/heroes/:hero_id` | ğŸ”’ éœ€è¦ | åŸºç¡€ä¿¡æ¯ï¼ˆç­‰çº§ã€ç»éªŒã€èŒä¸šï¼‰|
| è·å–å®Œæ•´ä¿¡æ¯ | GET | `/api/v1/game/heroes/:hero_id/full` | ğŸ”’ éœ€è¦ | å«èŒä¸šã€å±æ€§ã€æŠ€èƒ½ |

### èŒä¸šç›¸å…³
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| æ£€æŸ¥è¿›é˜¶æ¡ä»¶ | GET | `/api/v1/game/heroes/:hero_id/advancement-check` | ğŸ”’ éœ€è¦ | æ£€æŸ¥æ˜¯å¦æ»¡è¶³è¿›é˜¶è¦æ±‚ |
| èŒä¸šè¿›é˜¶ | POST | `/api/v1/game/heroes/:hero_id/advance` | ğŸ”’ éœ€è¦ | ä¾‹å¦‚ï¼šæˆ˜å£«â†’ç‹‚æˆ˜å£« |
| èŒä¸šè½¬èŒ | POST | `/api/v1/game/heroes/:hero_id/transfer` | ğŸ”’ éœ€è¦ | è½¬æ¢åˆ°å…¶ä»–åŸºç¡€èŒä¸š |

### æµ‹è¯•å·¥å…·
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| å¢åŠ ç»éªŒ | POST | `/api/v1/game/heroes/:hero_id/experience` | ğŸ”’ éœ€è¦ | æµ‹è¯•ç”¨ï¼Œç›´æ¥åŠ ç»éªŒ |

**æ•°æ®ç»“æ„**ï¼š
```json
{
  "hero_id": "uuid",
  "user_id": "uuid",
  "name": "è‹±é›„å",
  "level": 5,
  "experience": 750,
  "current_class_id": "uuid",
  "class": {
    "class_name": "ç‹‚æˆ˜å£«",
    "tier": 2,
    "base_class": "æˆ˜å£«"
  },
  "attributes": {...},
  "skills": [...]
}
```

---

## 3ï¸âƒ£ å±æ€§ç®¡ç†ï¼ˆ3ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| è·å–è‹±é›„å±æ€§ | GET | `/api/v1/game/heroes/:hero_id/attributes` | ğŸ”’ éœ€è¦ | è·å–6å¤§å±æ€§ï¼ˆåŠ›æ•ä½“æ™ºæ„Ÿé­…ï¼‰|
| å±æ€§åŠ ç‚¹ | POST | `/api/v1/game/heroes/:hero_id/attributes/allocate` | ğŸ”’ éœ€è¦ | ä½¿ç”¨å±æ€§ç‚¹åŠ ç‚¹ |
| å›é€€å±æ€§ | POST | `/api/v1/game/heroes/:hero_id/attributes/rollback` | ğŸ”’ éœ€è¦ | æ’¤é”€æœ€åä¸€æ¬¡åŠ ç‚¹ |

**å±æ€§ç³»ç»Ÿ**ï¼š
- **åŸºç¡€å±æ€§**ï¼šåŠ›é‡ã€æ•æ·ã€ä½“è´¨ã€æ™ºåŠ›ã€æ„ŸçŸ¥ã€é­…åŠ›
- **æ¥æº**ï¼š
  - èŒä¸šåˆå§‹å€¼ï¼ˆ`class_base_attributes`ï¼‰
  - ç©å®¶åŠ ç‚¹ï¼ˆ`hero_attributes.allocated_*`ï¼‰
  - èŒä¸šåŠ æˆï¼ˆ`class_attribute_bonuses`ï¼‰
- **è®¡ç®—å…¬å¼**ï¼š`computed_* = base + allocated + class_bonus`

**è¿”å›ç¤ºä¾‹**ï¼š
```json
{
  "base_strength": 15,
  "allocated_strength": 3,
  "class_bonus_strength": 2,
  "computed_strength": 20,
  "available_points": 5
}
```

---

## 4ï¸âƒ£ æŠ€èƒ½ç®¡ç†ï¼ˆ5ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| è·å–å¯å­¦æŠ€èƒ½ | GET | `/api/v1/game/heroes/:hero_id/skills/available` | ğŸ”’ éœ€è¦ | æ ¹æ®èŒä¸š/ç­‰çº§ç­›é€‰å¯å­¦æŠ€èƒ½ |
| è·å–å·²å­¦æŠ€èƒ½ | GET | `/api/v1/game/heroes/:hero_id/skills/learned` | ğŸ”’ éœ€è¦ | è‹±é›„å·²æŒæ¡çš„æŠ€èƒ½åˆ—è¡¨ |
| å­¦ä¹ æŠ€èƒ½ | POST | `/api/v1/game/heroes/:hero_id/skills/learn` | ğŸ”’ éœ€è¦ | å­¦ä¹ æ–°æŠ€èƒ½ |
| å‡çº§æŠ€èƒ½ | POST | `/api/v1/game/heroes/:hero_id/skills/:skill_id/upgrade` | ğŸ”’ éœ€è¦ | æå‡æŠ€èƒ½ç­‰çº§ |
| å›é€€æŠ€èƒ½ | POST | `/api/v1/game/heroes/:hero_id/skills/:skill_id/rollback` | ğŸ”’ éœ€è¦ | æ’¤é”€æœ€åä¸€æ¬¡å‡çº§ |

**æŠ€èƒ½ç³»ç»Ÿç‰¹æ€§**ï¼š
- æŠ€èƒ½ç­‰çº§ï¼š1-10çº§
- å‡çº§æ¶ˆè€—ï¼šç»éªŒ + é‡‘å¸ + ææ–™ï¼ˆJSONBï¼‰
- æŠ€èƒ½æ§½é™åˆ¶ï¼šæœ€å¤šå­¦ä¹  N ä¸ªæŠ€èƒ½
- å›é€€æœºåˆ¶ï¼šæ”¯æŒæ’¤é”€æœ€åä¸€æ¬¡æ“ä½œ

**æŠ€èƒ½è§£é”åŠ¨ä½œ**ï¼š
- æ¯ä¸ªæŠ€èƒ½åœ¨ç‰¹å®šç­‰çº§è§£é”ä¸åŒåŠ¨ä½œ
- åŠ¨ä½œåŒ…å«æ•ˆæœï¼ˆä¼¤å®³ã€æ²»ç–—ã€buff/debuffï¼‰
- æ”¯æŒ DnD 5e æœºåˆ¶ï¼ˆå‘½ä¸­æ£€å®šã€è±å…æ£€å®šï¼‰

---

## 5ï¸âƒ£ èŒä¸šç³»ç»Ÿï¼ˆ4ä¸ªæ¥å£ï¼‰

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| è·å–åŸºç¡€èŒä¸š | GET | `/api/v1/game/classes/basic` | ğŸ”“ å…¬å¼€ | åˆ›å»ºè§’è‰²æ—¶é€‰æ‹© |
| è·å–èŒä¸šåˆ—è¡¨ | GET | `/api/v1/game/classes` | ğŸ”“ å…¬å¼€ | æ‰€æœ‰èŒä¸šï¼ˆå«è¿›é˜¶ï¼‰|
| è·å–èŒä¸šè¯¦æƒ… | GET | `/api/v1/game/classes/:class_id` | ğŸ”“ å…¬å¼€ | åŒ…å«å±æ€§ã€æŠ€èƒ½æ±  |
| è·å–è¿›é˜¶é€‰é¡¹ | GET | `/api/v1/game/classes/:class_id/advancement-options` | ğŸ”“ å…¬å¼€ | è¯¥èŒä¸šå¯è¿›é˜¶çš„æ–¹å‘ |

**èŒä¸šä½“ç³»**ï¼š
```
åŸºç¡€èŒä¸šï¼ˆTier 1ï¼‰ï¼š
â”œâ”€ æˆ˜å£« â†’ ç‹‚æˆ˜å£« / å®ˆæŠ¤è€…ï¼ˆTier 2ï¼‰
â”œâ”€ æ³•å¸ˆ â†’ å…ƒç´ å¸ˆ / å¥¥æœ¯å¸ˆï¼ˆTier 2ï¼‰
â””â”€ ç›—è´¼ â†’ åˆºå®¢ / æ¸¸ä¾ ï¼ˆTier 2ï¼‰
```

**èŒä¸šæ•°æ®**ï¼š
```json
{
  "class_id": "uuid",
  "class_code": "WARRIOR",
  "class_name": "æˆ˜å£«",
  "tier": 1,
  "base_attributes": {...},
  "attribute_bonuses": {...},
  "skill_pool": ["skill_id_1", "skill_id_2"],
  "advancement_requirements": {
    "min_level": 10,
    "required_attributes": {...}
  }
}
```

---

## 6ï¸âƒ£ æŠ€èƒ½è¯¦æƒ…æŸ¥è¯¢ï¼ˆ5ä¸ªæ¥å£ï¼‰

### åˆ—è¡¨æŸ¥è¯¢
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| æŠ€èƒ½åˆ—è¡¨ï¼ˆç®€åŒ–ç‰ˆï¼‰| GET | `/api/v1/game/skills/basic` | ğŸ”’ éœ€è¦ | ä»…åŸºæœ¬ä¿¡æ¯ |
| æŠ€èƒ½åˆ—è¡¨ï¼ˆæ ‡å‡†ç‰ˆï¼‰| GET | `/api/v1/game/skills/standard` | ğŸ”’ éœ€è¦ | å«è§£é”åŠ¨ä½œ |

### å•ä¸ªæŸ¥è¯¢
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| æŠ€èƒ½åŸºæœ¬ä¿¡æ¯ | GET | `/api/v1/game/skills/:skill_id/basic` | ğŸ”’ éœ€è¦ | åç§°ã€åˆ†ç±»ã€æè¿° |
| æŠ€èƒ½æ ‡å‡†ä¿¡æ¯ | GET | `/api/v1/game/skills/:skill_id/standard` | ğŸ”’ éœ€è¦ | +è§£é”åŠ¨ä½œåˆ—è¡¨ |
| æŠ€èƒ½å®Œæ•´ä¿¡æ¯ | GET | `/api/v1/game/skills/:skill_id/full` | ğŸ”’ éœ€è¦ | +åŠ¨ä½œæ•ˆæœè¯¦æƒ… |

**ç­›é€‰æ”¯æŒ**ï¼š
- `skill_type`: ä¸»åŠ¨/è¢«åŠ¨/åˆ‡æ¢
- `category_id`: æŠ€èƒ½åˆ†ç±»
- åˆ†é¡µï¼š`page`, `page_size`

**ä¸‰ç§ç‰ˆæœ¬å·®å¼‚**ï¼š
```
Basic    â†’ æŠ€èƒ½åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€åˆ†ç±»ã€å†·å´ï¼‰
Standard â†’ + è§£é”åŠ¨ä½œåˆ—è¡¨ï¼ˆåŠ¨ä½œåã€æ–½æ³•æ—¶é—´ï¼‰
Full     â†’ + åŠ¨ä½œæ•ˆæœè¯¦æƒ…ï¼ˆä¼¤å®³éª°å­ã€å‘½ä¸­åŠ å€¼ã€è±å…DCï¼‰
```

---

## 7ï¸âƒ£ å‡çº§æ¶ˆè€—æŸ¥è¯¢ï¼ˆ6ä¸ªæ¥å£ï¼‰

### è‹±é›„ç­‰çº§éœ€æ±‚
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| æ‰€æœ‰ç­‰çº§éœ€æ±‚ | GET | `/api/v1/game/hero-level-requirements` | ğŸ”“ å…¬å¼€ | ç­‰çº§1-40çš„ç»éªŒéœ€æ±‚ |
| æŒ‡å®šç­‰çº§éœ€æ±‚ | GET | `/api/v1/game/hero-level-requirements/:level` | ğŸ”“ å…¬å¼€ | å•ä¸ªç­‰çº§æŸ¥è¯¢ |

**è¿”å›æ•°æ®**ï¼š
```json
{
  "level": 5,
  "required_xp": 300,      // ä»4çº§å‡åˆ°5çº§éœ€è¦çš„å¢é‡ç»éªŒ
  "cumulative_xp": 750     // ä»1çº§å‡åˆ°5çº§éœ€è¦çš„ç´¯è®¡æ€»ç»éªŒ
}
```

### æŠ€èƒ½å‡çº§æ¶ˆè€—
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| æ‰€æœ‰å‡çº§æ¶ˆè€— | GET | `/api/v1/game/skill-upgrade-costs` | ğŸ”“ å…¬å¼€ | æŠ€èƒ½1-10çº§æ¶ˆè€— |
| æŒ‡å®šç­‰çº§æ¶ˆè€— | GET | `/api/v1/game/skill-upgrade-costs/:level` | ğŸ”“ å…¬å¼€ | å•ä¸ªç­‰çº§æŸ¥è¯¢ |

**è¿”å›æ•°æ®**ï¼š
```json
{
  "level": 3,
  "cost_xp": 400,
  "cost_gold": 200,
  "cost_materials": [
    {"item_id": "uuid", "quantity": 5}
  ]
}
```

### å±æ€§å‡çº§æ¶ˆè€—
| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è®¤è¯ | è¯´æ˜ |
|---|---|---|---|---|
| æ‰€æœ‰ç‚¹æ•°æ¶ˆè€— | GET | `/api/v1/game/attribute-upgrade-costs` | ğŸ”“ å…¬å¼€ | 1-20ç‚¹çš„æ¶ˆè€—é…ç½® |
| æŒ‡å®šç‚¹æ•°æ¶ˆè€— | GET | `/api/v1/game/attribute-upgrade-costs/:point_number` | ğŸ”“ å…¬å¼€ | å•ä¸ªç‚¹æ•°æŸ¥è¯¢ |

**è¿”å›æ•°æ®**ï¼š
```json
{
  "point_number": 5,
  "cost_xp": 100
}
```

---

## ğŸ® æ”¯æŒçš„å®Œæ•´æ¸¸æˆæµç¨‹

### æµç¨‹1ï¼šæ–°æ‰‹å…¥é—¨
```
1. æ³¨å†Œè´¦å· â†’ POST /auth/register
2. ç™»å½• â†’ POST /auth/login
3. æŸ¥çœ‹èŒä¸š â†’ GET /classes/basic
4. åˆ›å»ºè‹±é›„ â†’ POST /heroes
5. æŸ¥çœ‹è‹±é›„ â†’ GET /heroes/:hero_id/full
```

### æµç¨‹2ï¼šè§’è‰²æˆé•¿
```
1. æŸ¥çœ‹ç»éªŒéœ€æ±‚ â†’ GET /hero-level-requirements/:level
2. è·å¾—ç»éªŒï¼ˆæ¸¸æˆä¸­ï¼‰â†’ POST /heroes/:hero_id/experience
3. è‡ªåŠ¨å‡çº§ï¼ˆç³»ç»Ÿè®¡ç®—ï¼‰
4. è·å¾—å±æ€§ç‚¹å’ŒæŠ€èƒ½ç‚¹
```

### æµç¨‹3ï¼šå±æ€§ç®¡ç†
```
1. æŸ¥çœ‹å½“å‰å±æ€§ â†’ GET /heroes/:hero_id/attributes
2. æŸ¥çœ‹åŠ ç‚¹æ¶ˆè€— â†’ GET /attribute-upgrade-costs/:point_number
3. åˆ†é…å±æ€§ç‚¹ â†’ POST /heroes/:hero_id/attributes/allocate
4. åæ‚”äº†ï¼Ÿâ†’ POST /heroes/:hero_id/attributes/rollback
```

### æµç¨‹4ï¼šæŠ€èƒ½å­¦ä¹ 
```
1. æŸ¥çœ‹å¯å­¦æŠ€èƒ½ â†’ GET /heroes/:hero_id/skills/available
2. æŸ¥çœ‹æŠ€èƒ½è¯¦æƒ… â†’ GET /skills/:skill_id/full
3. æŸ¥çœ‹å­¦ä¹ æ¶ˆè€— â†’ GET /skill-upgrade-costs/1
4. å­¦ä¹ æŠ€èƒ½ â†’ POST /heroes/:hero_id/skills/learn
```

### æµç¨‹5ï¼šæŠ€èƒ½å‡çº§
```
1. æŸ¥çœ‹å·²å­¦æŠ€èƒ½ â†’ GET /heroes/:hero_id/skills/learned
2. æŸ¥çœ‹å‡çº§æ¶ˆè€— â†’ GET /skill-upgrade-costs/:level
3. å‡çº§æŠ€èƒ½ â†’ POST /heroes/:hero_id/skills/:skill_id/upgrade
4. åæ‚”äº†ï¼Ÿâ†’ POST /heroes/:hero_id/skills/:skill_id/rollback
```

### æµç¨‹6ï¼šèŒä¸šè¿›é˜¶
```
1. æŸ¥çœ‹è¿›é˜¶é€‰é¡¹ â†’ GET /classes/:class_id/advancement-options
2. æŸ¥çœ‹è¿›é˜¶èŒä¸šè¯¦æƒ… â†’ GET /classes/:advanced_class_id
3. æ£€æŸ¥è¿›é˜¶æ¡ä»¶ â†’ GET /heroes/:hero_id/advancement-check
4. æ‰§è¡Œè¿›é˜¶ â†’ POST /heroes/:hero_id/advance
```

---

## ğŸ–¥ï¸ å‰ç«¯å¯å®ç°çš„ç•Œé¢

### âœ… å®Œå…¨å¯ä»¥å®ç°çš„ç•Œé¢
1. **ç™»å½•æ³¨å†Œé¡µé¢**
   - æ³¨å†Œè¡¨å•ï¼ˆé‚®ç®±éªŒè¯ï¼‰
   - ç™»å½•è¡¨å•
   - å¯†ç æ‰¾å›

2. **è§’è‰²åˆ›å»º/é€‰æ‹©é¡µé¢**
   - å±•ç¤ºåŸºç¡€èŒä¸šï¼ˆæˆ˜å£«/æ³•å¸ˆ/ç›—è´¼ï¼‰
   - èŒä¸šè¯¦æƒ…é¢„è§ˆï¼ˆå±æ€§ã€æŠ€èƒ½æ± ï¼‰
   - åˆ›å»ºè§’è‰²è¡¨å•

3. **è§’è‰²è¯¦æƒ…é¡µé¢**
   - åŸºç¡€ä¿¡æ¯ï¼ˆåç§°ã€ç­‰çº§ã€ç»éªŒæ¡ï¼‰
   - å½“å‰èŒä¸šä¿¡æ¯
   - å±æ€§é¢æ¿ï¼ˆ6å¤§å±æ€§ï¼‰
   - å·²å­¦æŠ€èƒ½åˆ—è¡¨

4. **å±æ€§ç®¡ç†ç•Œé¢**
   - å½“å‰å±æ€§å€¼æ˜¾ç¤º
   - å¯ç”¨å±æ€§ç‚¹æ˜¾ç¤º
   - åŠ ç‚¹æŒ‰é’®ï¼ˆ+/-ï¼‰
   - åŠ ç‚¹æ¶ˆè€—é¢„è§ˆ
   - ç¡®è®¤/å›é€€æ“ä½œ

5. **æŠ€èƒ½æ ‘/æŠ€èƒ½å­¦ä¹ ç•Œé¢**
   - èŒä¸šæŠ€èƒ½æ± å±•ç¤º
   - å¯å­¦ä¹ æŠ€èƒ½ï¼ˆç°è‰²/é«˜äº®ï¼‰
   - æŠ€èƒ½è¯¦æƒ…é¢æ¿
     - åŸºæœ¬ä¿¡æ¯
     - è§£é”åŠ¨ä½œåˆ—è¡¨
     - æ•ˆæœè¯¦æƒ…ï¼ˆä¼¤å®³ã€å‘½ä¸­ï¼‰
   - å­¦ä¹ /å‡çº§æŒ‰é’®
   - æ¶ˆè€—é¢„è§ˆï¼ˆç»éªŒã€é‡‘å¸ã€ææ–™ï¼‰

6. **èŒä¸šè¿›é˜¶ç•Œé¢**
   - å½“å‰èŒä¸šå±•ç¤º
   - å¯è¿›é˜¶æ–¹å‘å±•ç¤ºï¼ˆ2ä¸ªé€‰é¡¹ï¼‰
   - è¿›é˜¶è¦æ±‚æ£€æŸ¥ï¼ˆç­‰çº§ã€å±æ€§ï¼‰
   - è¿›é˜¶ç¡®è®¤æŒ‰é’®

7. **é…ç½®æ•°æ®æŸ¥è¯¢ç•Œé¢**
   - ç­‰çº§ç»éªŒéœ€æ±‚è¡¨
   - æŠ€èƒ½å‡çº§æ¶ˆè€—è¡¨
   - å±æ€§åŠ ç‚¹æ¶ˆè€—è¡¨

---

## ğŸ“‹ æ•°æ®æµè½¬ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåˆ›å»ºè§’è‰²
```
å‰ç«¯ï¼š
  1. è·å–åŸºç¡€èŒä¸šåˆ—è¡¨
  2. ç”¨æˆ·é€‰æ‹©"æˆ˜å£«"
  3. æäº¤åˆ›å»ºè¯·æ±‚

è¯·æ±‚ï¼š
POST /api/v1/game/heroes
{
  "name": "è‰¾æ³½æ‹‰æ–¯å‹‡å£«",
  "class_id": "warrior_uuid"
}

å“åº”ï¼š
{
  "code": 100000,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "hero_id": "new_hero_uuid",
    "name": "è‰¾æ³½æ‹‰æ–¯å‹‡å£«",
    "level": 1,
    "experience": 0,
    "current_class_id": "warrior_uuid",
    ...
  }
}
```

### ç¤ºä¾‹2ï¼šå±æ€§åŠ ç‚¹
```
å‰ç«¯ï¼š
  1. æ˜¾ç¤ºå½“å‰åŠ›é‡ 15ï¼Œå¯ç”¨ç‚¹æ•° 3
  2. ç”¨æˆ·ç‚¹å‡»åŠ›é‡ +1
  3. æŸ¥è¯¢æ¶ˆè€—ï¼šGET /attribute-upgrade-costs/16
  4. ç¡®è®¤åæäº¤

è¯·æ±‚ï¼š
POST /api/v1/game/heroes/:hero_id/attributes/allocate
{
  "attribute_name": "strength",
  "points": 1
}

å“åº”ï¼š
{
  "code": 100000,
  "message": "å±æ€§åŠ ç‚¹æˆåŠŸ",
  "data": {
    "allocated_strength": 1,
    "computed_strength": 16,
    "available_points": 2
  }
}
```

### ç¤ºä¾‹3ï¼šå­¦ä¹ æŠ€èƒ½
```
å‰ç«¯ï¼š
  1. è·å–å¯å­¦æŠ€èƒ½åˆ—è¡¨
  2. ç‚¹å‡»"çƒˆç„°æ–©"æŸ¥çœ‹è¯¦æƒ…
  3. æŸ¥çœ‹å­¦ä¹ æ¶ˆè€—
  4. ç¡®è®¤å­¦ä¹ 

è¯·æ±‚ï¼š
POST /api/v1/game/heroes/:hero_id/skills/learn
{
  "skill_id": "fireslash_uuid"
}

å“åº”ï¼š
{
  "code": 100000,
  "message": "æŠ€èƒ½å­¦ä¹ æˆåŠŸ",
  "data": {
    "hero_skill_id": "uuid",
    "skill_id": "fireslash_uuid",
    "current_level": 1,
    "unlocked_actions": [...]
  }
}
```

---

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### è®¤è¯æœºåˆ¶
- ç™»å½•åè·å¾— `session_token`
- éœ€è®¤è¯æ¥å£åœ¨ Header ä¸­æºå¸¦ï¼š
  ```
  Authorization: Bearer <session_token>
  ```
- Nginx å±‚å¯èƒ½æœ‰é¢å¤–çš„è®¤è¯æ£€æŸ¥

### å“åº”æ ¼å¼
```json
{
  "code": 100000,          // ä¸šåŠ¡ç ï¼ˆ100000=æˆåŠŸï¼‰
  "message": "æ“ä½œæˆåŠŸ",
  "data": {...},           // å®é™…æ•°æ®
  "timestamp": 1759501201,
  "trace_id": "..."        // é“¾è·¯è¿½è¸ªID
}
```

### é”™è¯¯å¤„ç†
```json
{
  "code": 400001,
  "message": "å‚æ•°é”™è¯¯ï¼šskill_id ä¸èƒ½ä¸ºç©º",
  "timestamp": 1759501201,
  "trace_id": "..."
}
```

### Swagger æ–‡æ¡£
- åœ°å€ï¼š`http://localhost:8072/swagger/index.html`
- åŒ…å«æ‰€æœ‰æ¥å£çš„è¯¦ç»†è¯´æ˜
- æ”¯æŒåœ¨çº¿æµ‹è¯•

---

## ğŸ“ˆ æ¥å£å¤æ‚åº¦è¯„ä¼°

### ç®€å•æ¥å£ï¼ˆé…ç½®æŸ¥è¯¢ï¼‰
- `GET /classes` - èŒä¸šåˆ—è¡¨
- `GET /hero-level-requirements` - ç­‰çº§éœ€æ±‚
- `GET /skill-upgrade-costs` - æŠ€èƒ½æ¶ˆè€—
- `GET /attribute-upgrade-costs` - å±æ€§æ¶ˆè€—

### ä¸­ç­‰æ¥å£ï¼ˆå•èµ„æºæ“ä½œï¼‰
- `POST /heroes` - åˆ›å»ºè‹±é›„
- `GET /heroes/:hero_id` - è·å–è‹±é›„
- `POST /heroes/:hero_id/attributes/allocate` - å±æ€§åŠ ç‚¹
- `POST /heroes/:hero_id/skills/learn` - å­¦ä¹ æŠ€èƒ½

### å¤æ‚æ¥å£ï¼ˆå…³è”æŸ¥è¯¢ï¼‰
- `GET /heroes/:hero_id/full` - è‹±é›„å®Œæ•´ä¿¡æ¯ï¼ˆå«èŒä¸šã€å±æ€§ã€æŠ€èƒ½ï¼‰
- `GET /heroes/:hero_id/skills/available` - å¯å­¦æŠ€èƒ½ï¼ˆéœ€è®¡ç®—èŒä¸šã€ç­‰çº§é™åˆ¶ï¼‰
- `GET /skills/:skill_id/full` - æŠ€èƒ½å®Œæ•´ä¿¡æ¯ï¼ˆæ·±åº¦å…³è”æ•ˆæœï¼‰
- `GET /heroes/:hero_id/advancement-check` - è¿›é˜¶æ£€æŸ¥ï¼ˆéœ€éªŒè¯å¤šä¸ªæ¡ä»¶ï¼‰

---

## ğŸ¯ æ€»ç»“

### å½“å‰ç³»ç»Ÿèƒ½åŠ›
âœ… **è§’è‰²æ‰®æ¼”æ ¸å¿ƒå¾ªç¯**ï¼šåˆ›å»ºè§’è‰² â†’ æˆé•¿å‡çº§ â†’ åŠ ç‚¹é…ç½® â†’ å­¦ä¹ æŠ€èƒ½ â†’ èŒä¸šè¿›é˜¶  
âœ… **å®Œæ•´çš„é…ç½®æŸ¥è¯¢**ï¼šèŒä¸šã€æŠ€èƒ½ã€æ¶ˆè€—æ•°æ®å…¨éƒ¨å¯æŸ¥è¯¢  
âœ… **å®¹é”™æœºåˆ¶**ï¼šå±æ€§å’ŒæŠ€èƒ½æ”¯æŒå›é€€æ“ä½œ  
âœ… **åˆ†å±‚è®¾è®¡**ï¼šåŸºæœ¬/æ ‡å‡†/å®Œæ•´ä¸‰ç§æŸ¥è¯¢æ·±åº¦

### ç³»ç»Ÿç‰¹è‰²
- ğŸ² **DnD 5e æœºåˆ¶**ï¼šå‘½ä¸­æ£€å®šã€è±å…æ£€å®šã€ä¼¤å®³éª°å­
- ğŸ”„ **åŸå­æ•ˆæœç³»ç»Ÿ**ï¼šæŠ€èƒ½â†’åŠ¨ä½œâ†’æ•ˆæœçš„ä¸‰å±‚è®¾è®¡
- ğŸ“Š **é…ç½®é©±åŠ¨**ï¼šæ‰€æœ‰æ•°å€¼é€šè¿‡é…ç½®è¡¨ç®¡ç†
- ğŸ›¡ï¸ **èŒä¸šä½“ç³»**ï¼šåŸºç¡€èŒä¸š + è¿›é˜¶èŒä¸šçš„æ ‘çŠ¶ç»“æ„

### é€‚ç”¨åœºæ™¯
å½“å‰æ¥å£ä½“ç³»é€‚åˆï¼š
- **è§’è‰²å…»æˆç±»æ¸¸æˆ**çš„å‰ç«¯å±•ç¤ºå±‚
- **ç­–ç•¥è§„åˆ’å·¥å…·**ï¼ˆå±æ€§/æŠ€èƒ½æ¨¡æ‹Ÿå™¨ï¼‰
- **æ•°æ®æŸ¥è¯¢ç³»ç»Ÿ**ï¼ˆèŒä¸š/æŠ€èƒ½æ•°æ®åº“ï¼‰

---

*ç”Ÿæˆæ—¶é—´ï¼š2025-10-17*  
*æ¥å£ç‰ˆæœ¬ï¼šv1*  
*æ€»æ¥å£æ•°ï¼š40*

