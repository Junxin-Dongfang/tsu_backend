syntax = "proto3";

package user.v1;
option go_package = "tsu-self/internal/rpc/generated/user";

import "google/protobuf/timestamp.proto";
import "common/common.proto";

// ===== 用户信息管理 =====
message GetUserInfoRequest {
  string user_id = 1;      // 用户ID
}

message GetUserInfoResponse {
  common.v1.UserInfo user_info = 1; // 用户信息
  string error_message = 2; // 错误信息
}

message UpdateUserTraitsRequest {
  string user_id = 1;                // 用户ID
  map<string, string> traits = 2;    // 要更新的特征
}

message UpdateUserTraitsResponse {
  bool success = 1;        // 更新是否成功
  string error_message = 2; // 错误信息
}

// ===== 用户设置管理 =====
message GetUserSettingsRequest {
  string user_id = 1;      // 用户ID
}

message GetUserSettingsResponse {
  UserSettings settings = 1; // 用户设置
  string error_message = 2;  // 错误信息
}

message UpdateUserSettingsRequest {
  string user_id = 1;        // 用户ID
  UserSettings settings = 2; // 要更新的设置
}

message UpdateUserSettingsResponse {
  bool success = 1;        // 更新是否成功
  string error_message = 2; // 错误信息
}

// ===== 用户设置数据结构 =====
message UserSettings {
  // 通知设置
  bool email_notifications = 1;   // 是否启用邮件通知
  bool sms_notifications = 2;     // 是否启用短信通知
  bool push_notifications = 3;    // 是否启用推送通知
  bool marketing_emails = 4;      // 是否接收营销邮件

  // 隐私设置
  string profile_visibility = 5;  // 个人资料可见性: public, friends, private
  bool show_online_status = 6;    // 是否显示在线状态
  bool allow_friend_requests = 7; // 是否允许好友请求

  // 安全设置
  bool two_factor_enabled = 8;    // 是否启用双因素认证
  bool login_alerts = 9;          // 是否启用登录提醒

  // 其他设置
  string theme = 10;              // 主题: light, dark, auto
}