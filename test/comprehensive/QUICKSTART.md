# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5 åˆ†é’Ÿå¿«é€Ÿæµ‹è¯•

### 1. ç¡®è®¤ç¯å¢ƒ

```bash
# æ£€æŸ¥ä¾èµ–
which curl jq

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:80/health
```

### 2. è¿è¡Œæµ‹è¯•

```bash
cd /Users/lonyon/working/å†›ä¿¡ä¸œæ–¹/tsué¡¹ç›®/tsu-server-self/tsu-self/test/comprehensive

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./main_test.sh

# æˆ–è€…åªè¿è¡ŒåŸºç¡€æµ‹è¯•
./main_test.sh --suite "01|02|03"
```

### 3. æŸ¥çœ‹ç»“æœ

æµ‹è¯•å®Œæˆåï¼ŒæŠ¥å‘Šä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨æ§åˆ¶å°ï¼Œè¯¦ç»†æ—¥å¿—ä¿å­˜åœ¨ `reports/run_*/` ç›®å½•ã€‚

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
./main_test.sh --suite 07              # åªæµ‹è¯•æŠ€èƒ½ç³»ç»Ÿ
./main_test.sh --suite "05|06|07"      # æµ‹è¯•é…ç½®ç›¸å…³

# è°ƒè¯•æ¨¡å¼
./main_test.sh --verbose               # è¯¦ç»†è¾“å‡º
./main_test.sh --no-cleanup            # ä¸æ¸…ç†æµ‹è¯•æ•°æ®

# è‡ªå®šä¹‰ç¯å¢ƒ
./main_test.sh --url http://test.example.com --username admin --password admin123

# æŸ¥çœ‹å¸®åŠ©
./main_test.sh --help
```

## ğŸ¯ æµ‹è¯•å¥—ä»¶è¯´æ˜

| å¥—ä»¶ç¼–å· | æµ‹è¯•å†…å®¹ | è¿è¡Œæ—¶é—´ | æ¨èåœºæ™¯ |
|---------|---------|---------|---------|
| 01 | ç³»ç»Ÿå¥åº·æ£€æŸ¥ | ~5ç§’ | æ¯æ¬¡éƒ¨ç½²å |
| 02 | è®¤è¯æµç¨‹ | ~10ç§’ | è®¤è¯ç›¸å…³æ”¹åŠ¨ |
| 03 | ç”¨æˆ·ç®¡ç† | ~15ç§’ | ç”¨æˆ·åŠŸèƒ½æ”¹åŠ¨ |
| 04 | RBAC æƒé™ | ~30ç§’ | æƒé™ç›¸å…³æ”¹åŠ¨ |
| 05 | åŸºç¡€é…ç½® | ~45ç§’ | é…ç½®æ¨¡å—æ”¹åŠ¨ |
| 06 | å…ƒæ•°æ® | ~20ç§’ | å…ƒæ•°æ®ç›¸å…³æ”¹åŠ¨ |
| 07 | æŠ€èƒ½ç³»ç»Ÿ | ~30ç§’ | æŠ€èƒ½åŠŸèƒ½æ”¹åŠ¨ |
| 08 | æ•ˆæœç³»ç»Ÿ | ~35ç§’ | æ•ˆæœ/Buff æ”¹åŠ¨ |
| 09 | åŠ¨ä½œç³»ç»Ÿ | ~35ç§’ | åŠ¨ä½œåŠŸèƒ½æ”¹åŠ¨ |
| 10 | å…³è”å…³ç³» | ~30ç§’ | å…³è”åŠŸèƒ½æ”¹åŠ¨ |
| 11 | è¾¹ç•Œæ¡ä»¶ | ~40ç§’ | ä¸Šçº¿å‰å…¨é¢æµ‹è¯• |

**é¢„è®¡æ€»è¿è¡Œæ—¶é—´**: çº¦ 5-8 åˆ†é’Ÿ

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### å¿«é€ŸéªŒè¯æ¥å£

åªæµ‹è¯•æŸä¸ªæ¥å£æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

```bash
# æµ‹è¯•è®¤è¯å’Œå¥åº·æ£€æŸ¥
./main_test.sh --suite "01|02"
```

### CI/CD é›†æˆ

```bash
# åœ¨ CI ä¸­è¿è¡Œï¼ˆå¤±è´¥ç«‹å³åœæ­¢ï¼‰
./main_test.sh --continue-on-failure false

# æ£€æŸ¥é€€å‡ºç 
if [ $? -eq 0 ]; then
    echo "æµ‹è¯•é€šè¿‡"
else
    echo "æµ‹è¯•å¤±è´¥"
    exit 1
fi
```

### è°ƒè¯•å¤±è´¥ç”¨ä¾‹

```bash
# 1. è¿è¡Œæµ‹è¯•å¹¶ä¿ç•™æ•°æ®
./main_test.sh --no-cleanup --verbose

# 2. æŸ¥çœ‹å¤±è´¥æ—¥å¿—
cat reports/run_*/failures.log

# 3. æŸ¥çœ‹ API è°ƒç”¨è¯¦æƒ…
cat reports/run_*/api_calls.log

# 4. æ‰‹åŠ¨é‡ç°é—®é¢˜
curl -X GET http://localhost:80/api/v1/admin/skills \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## ğŸ“Š è¾“å‡ºè¯´æ˜

### æˆåŠŸè¾“å‡º

```
âœ“ [01] åˆ›å»ºæµ‹è¯•èŒä¸š - 200 OK (123ms)
```

- `âœ“`: æµ‹è¯•é€šè¿‡
- `[01]`: æµ‹è¯•ç”¨ä¾‹ç¼–å·
- `200 OK`: HTTP çŠ¶æ€ç 
- `(123ms)`: å“åº”æ—¶é—´

### å¤±è´¥è¾“å‡º

```
âœ— [04] æ›´æ–°æŠ€èƒ½ - 500 Internal Error (234ms)
  Response: {"error":"internal server error"}
```

- `âœ—`: æµ‹è¯•å¤±è´¥
- æ˜¾ç¤ºå®é™…å“åº”å†…å®¹

### å¥—ä»¶ç»Ÿè®¡

```
----------------------------------------
å¥—ä»¶: æŠ€èƒ½ç³»ç»Ÿ
æ€»è®¡: 10 ä¸ªæµ‹è¯•
é€šè¿‡: 9
å¤±è´¥: 1
ç”¨æ—¶: 1234ms
----------------------------------------
```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: curl: command not found

```bash
# macOS
brew install curl

# Ubuntu
sudo apt-get install curl
```

### é—®é¢˜ 2: jq: command not found

```bash
# macOS
brew install jq

# Ubuntu
sudo apt-get install jq
```

### é—®é¢˜ 3: è¿æ¥è¢«æ‹’ç»

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker ps | grep tsu

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :80

# å¯åŠ¨æœåŠ¡
make dev-up
```

### é—®é¢˜ 4: ç™»å½•å¤±è´¥

- ç¡®è®¤è´¦å·å¯†ç æ­£ç¡®: `root` / `password`
- æ£€æŸ¥ Kratos æœåŠ¡çŠ¶æ€
- æŸ¥çœ‹ API è°ƒç”¨æ—¥å¿—

## ğŸ“š æ›´å¤šèµ„æº

- **è¯¦ç»†æ–‡æ¡£**: [README.md](README.md)
- **æµ‹è¯•è®¡åˆ’**: [plan.md](../../plan.md)
- **API æ–‡æ¡£**: http://localhost:80/swagger/index.html

## âœ… é¢„æœŸç»“æœ

æ­£å¸¸è¿è¡Œåï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     TSU Admin API å…¨é¢æµ‹è¯•æ¡†æ¶     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æµ‹è¯•å¼€å§‹æ—¶é—´: 2025-01-06 14:30:22
API åœ°å€: http://localhost:80
æµ‹è¯•è´¦å·: root

[... æµ‹è¯•è¿‡ç¨‹è¾“å‡º ...]

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           æµ‹è¯•æ€»ç»“æŠ¥å‘Š             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æ€»æµ‹è¯•æ•°:   110
é€šè¿‡:       110
å¤±è´¥:       0
é€šè¿‡ç‡:     100%

âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

ç¥æµ‹è¯•æ„‰å¿«ï¼ğŸ‰
